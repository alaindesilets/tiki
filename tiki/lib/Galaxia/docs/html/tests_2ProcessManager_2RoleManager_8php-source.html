<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RoleManager.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>RoleManager.php</h1><div class="fragment"><pre>00001 &lt;?
00002 
00003 <span class="keyword">class </span>RoleManagerTest <span class="keyword">extends</span> PHPUnit_TestCase {
00004     <span class="comment">// contains the object handle of the string class</span>
00005     var $roleManager;
00006     
00007     <span class="comment">// constructor of the test suite</span>
00008     function ParseDataTest($name) {
00009        $this-&gt;PHPUnit_TestCase($name);
00010     }
00011     <span class="comment">// called before the test functions will be executed    </span>
00012     <span class="comment">// this function is defined in PHPUnit_TestCase and overwritten </span>
00013     <span class="comment">// here</span>
00014     function setUp() {
00015                 global $dbTiki;
00016                 $this-&gt;roleManager=<span class="keyword">new</span> <a class="code" href="classRoleManager.html">RoleManager</a>($dbTiki);     
00017     }
00018     
00019     <span class="comment">// called after the test functions are executed    </span>
00020     <span class="comment">// this function is defined in PHPUnit_TestCase and overwritten </span>
00021     <span class="comment">// here    </span>
00022     function tearDown() {
00023         <span class="comment">// delete your instance</span>
00024         unset($this-&gt;roleManager);
00025     }
00026   
00027     function testAddRemoveListRoles() {
00028         $pId = 1;
00029         $this-&gt;foo='bar';
00030         $vars = Array(  'name' =&gt; 'foorole',
00031                         'description' =&gt; '<span class="keyword">this</span> is foorole'
00032                      );
00033         $roles = $this-&gt;roleManager-&gt;list_roles($pId,0,-1,'roleId_desc<span class="charliteral">','</span>');
00034         $cant = $roles['cant'];             
00035                 $rid = $this-&gt;roleManager-&gt;replace_role($pId,0,$vars);        
00036             $this-&gt;rid = $rid;
00037                 $roles = $this-&gt;roleManager-&gt;list_roles($pId,0,-1,'roleId_desc<span class="charliteral">','</span>');
00038                 $this-&gt;assertEquals($roles['cant'],$cant+1);                       
00039                 $this-&gt;roleManager-&gt;remove_role($pId,$rid);     
00040                 $roles = $this-&gt;roleManager-&gt;list_roles($pId,0,-1,'roleId_desc<span class="charliteral">','</span>');    
00041                 $this-&gt;assertEquals($roles['cant'],$cant);                       
00042     }
00043     
00044     function testGetRole() {
00045         $pId = 1;
00046         $this-&gt;foo='bar';
00047         $vars = Array(  'name' =&gt; 'fo\'orole',
00048                         'description' =&gt; '<span class="keyword">this</span> is foorole'
00049                      );
00050                 $rid = $this-&gt;roleManager-&gt;replace_role($pId,0,$vars);        
00051                 $role = $this-&gt;roleManager-&gt;get_role($pId,$rid);
00052                 $this-&gt;assertEquals($role['name'],'fo\'orole');                       
00053                 $this-&gt;assertEquals($role['description'],'<span class="keyword">this</span> is foorole');                       
00054                 $this-&gt;roleManager-&gt;remove_role($pId,$rid);     
00055     }
00056     
00057     function testList() {
00058         $vars = Array(  'name' =&gt; 'foo role',
00059                         'description' =&gt; '<span class="keyword">this</span> is foorole'
00060                      );
00061         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'roleId_desc<span class="charliteral">','</span>');
00062         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'roleId_desc<span class="charliteral">','</span>',<span class="stringliteral">"name='foo role'"</span>);
00063         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'roleId_desc<span class="charliteral">','</span>foo');
00064         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'name_desc<span class="charliteral">','</span>');
00065                 $rid = $this-&gt;roleManager-&gt;replace_role(1,0,$vars);        
00066         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'roleId_desc<span class="charliteral">','</span>');
00067         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'roleId_desc<span class="charliteral">','</span>',<span class="stringliteral">"name='foo role'"</span>);
00068         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'roleId_desc<span class="charliteral">','</span>foo');
00069         $procs = $this-&gt;roleManager-&gt;list_roles(1,0,-1,'name_desc<span class="charliteral">','</span>');
00070                 $this-&gt;roleManager-&gt;remove_role(1,$rid);        
00071     }
00072 
00073     
00074     function testAddUpdateGetRoles() {
00075         $pId = 1;
00076         $this-&gt;foo='bar';
00077         $vars = Array(  'name' =&gt; 'foorole',
00078                         'description' =&gt; '<span class="keyword">this</span> is foorole'
00079                      );
00080                 $rid = $this-&gt;roleManager-&gt;replace_role($pId,0,$vars);        
00081             $roles = $this-&gt;roleManager-&gt;list_roles($pId,0,-1,'roleId_desc<span class="charliteral">','</span>');
00082         $cant1 = $roles['cant'];             
00083         $vars = Array(  'name' =&gt; 'foorole2',
00084                         'description' =&gt; '<span class="keyword">this</span> is foorole2'
00085                      );
00086                 $rid = $this-&gt;roleManager-&gt;replace_role($pId,$rid,$vars);                       
00087                 $roles = $this-&gt;roleManager-&gt;list_roles($pId,0,-1,'roleId_desc<span class="charliteral">','</span>');
00088                 $this-&gt;assertEquals($cant1,$roles['cant']);                             
00089                 $role = $this-&gt;roleManager-&gt;get_role($pId,$rid);
00090                 $this-&gt;assertEquals($role['name'],'foorole2');                       
00091                 $this-&gt;assertEquals($role['description'],'<span class="keyword">this</span> is foorole2');                       
00092                 $this-&gt;roleManager-&gt;remove_role($pId,$rid);             
00093                 
00094     }
00095     
00096             
00097   }
00098 
00099 include_once('lib/Galaxia/src/<a class="code" href="classProcessManager.html">ProcessManager</a>/<a class="code" href="classRoleManager.html">RoleManager</a>.php');  
00100 $suite = <span class="keyword">new</span> PHPUnit_TestSuite(<span class="stringliteral">"roleManagerTest"</span>);
00101 $result = PHPUnit::run($suite);
00102 echo $result -&gt; toHTML();
00103 ?&gt;
</pre></div><hr><address style="align: right;"><small>Generated on Mon Apr 14 11:51:59 2003 for Galaxia by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
