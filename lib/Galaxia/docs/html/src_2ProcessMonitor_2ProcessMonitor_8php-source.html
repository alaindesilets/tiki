<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ProcessMonitor.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ProcessMonitor.php</h1><div class="fragment"><pre>00001 &lt;?php
00002 <span class="keyword">class </span>ProcessMonitor <span class="keyword">extends</span> Base {
00003 
00004   function monitor_list_processes($offset,$maxRecords,$sort_mode,$find,$where='')
00005   {
00006     $sort_mode = str_replace(<span class="stringliteral">"_"</span>,<span class="stringliteral">" "</span>,$sort_mode);
00007     <span class="keywordflow">if</span>($find) {
00008       $mid=<span class="stringliteral">" where ((name like '%"</span>.$find.<span class="stringliteral">"%') or (description like '%"</span>.$find.<span class="stringliteral">"%'))"</span>;
00009     } <span class="keywordflow">else</span> {
00010       $mid=<span class="stringliteral">""</span>;
00011     }
00012     <span class="keywordflow">if</span>($where) {
00013       <span class="keywordflow">if</span>($mid) {
00014         $mid.= <span class="stringliteral">" and ($where) "</span>;
00015       } <span class="keywordflow">else</span> {
00016         $mid.= <span class="stringliteral">" where ($where) "</span>;
00017       }
00018     }
00019     $query = <span class="stringliteral">"select * from galaxia_processes $mid order by $sort_mode limit $offset,$maxRecords"</span>;
00020     $query_cant = <span class="stringliteral">"select count(*) from galaxia_processes $mid"</span>;
00021     $result = $this-&gt;query($query);
00022     $cant = $this-&gt;getOne($query_cant);
00023     $ret = Array();
00024     <span class="keywordflow">while</span>($res = $result-&gt;fetchRow(DB_FETCHMODE_ASSOC)) {
00025       <span class="comment">// Number of active instances</span>
00026       $res['active_instances']=$this-&gt;getOne(<span class="stringliteral">"select count(*) from galaxia_instances where status='active' and pId="</span>.$res['pId']);
00027       <span class="comment">// Number of exception instances</span>
00028       $res['exception_instances']=$this-&gt;getOne(<span class="stringliteral">"select count(*) from galaxia_instances where status='exception' and pId="</span>.$res['pId']);
00029       <span class="comment">// Number of completed instances</span>
00030       $res['completed_instances']=$this-&gt;getOne(<span class="stringliteral">"select count(*) from galaxia_instances where status='completed' and pId="</span>.$res['pId']);
00031       <span class="comment">// Number of aborted instances</span>
00032       $res['aborted_instances']=$this-&gt;getOne(<span class="stringliteral">"select count(*) from galaxia_instances where status='aborted' and pId="</span>.$res['pId']);
00033       $res['all_instances']=$this-&gt;getOne(<span class="stringliteral">"select count(*) from galaxia_instances where pId="</span>.$res['pId']);
00034       <span class="comment">// Number of activities</span>
00035       $res['activities']=$this-&gt;getOne(<span class="stringliteral">"select count(*) from galaxia_activities where pId="</span>.$res['pId']);
00036       $ret[] = $res;
00037     }
00038     $retval = Array();
00039     $retval[<span class="stringliteral">"data"</span>] = $ret;
00040     $retval[<span class="stringliteral">"cant"</span>] = $cant;
00041     <span class="keywordflow">return</span> $retval;
00042   }
00043 
00044   function monitor_list_all_processes($sort_mode)
00045   {
00046     $sort_mode = str_replace(<span class="stringliteral">"_"</span>,<span class="stringliteral">" "</span>,$sort_mode);
00047    
00048     $query = <span class="stringliteral">"select distinct(name),pId from galaxia_processes order by $sort_mode"</span>;
00049     $result = $this-&gt;query($query);
00050     $cant = $this-&gt;getOne($query_cant);
00051     $ret = Array();
00052     <span class="keywordflow">while</span>($res = $result-&gt;fetchRow(DB_FETCHMODE_ASSOC)) {
00053       $ret[] = $res;
00054     }
00055     <span class="keywordflow">return</span> $ret;
00056   }
00057 
00058 
00059 }
00060 ?&gt;
</pre></div><hr><address style="align: right;"><small>Generated on Mon Apr 14 11:51:59 2003 for Galaxia by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
