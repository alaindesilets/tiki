<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ProcessManager.php Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ProcessManager.php</h1><div class="fragment"><pre>00001 &lt;?
00002 
00003 <span class="keyword">class </span>ProcessManagerTest <span class="keyword">extends</span> PHPUnit_TestCase {
00004     <span class="comment">// contains the object handle of the string class</span>
00005     var $processManager;
00006     
00007     <span class="comment">// constructor of the test suite</span>
00008     function ParseDataTest($name) {
00009        $this-&gt;PHPUnit_TestCase($name);
00010     }
00011     <span class="comment">// called before the test functions will be executed    </span>
00012     <span class="comment">// this function is defined in PHPUnit_TestCase and overwritten </span>
00013     <span class="comment">// here</span>
00014     function setUp() {
00015                 global $dbTiki;
00016                 $this-&gt;processManager=<span class="keyword">new</span> <a class="code" href="classProcessManager.html">ProcessManager</a>($dbTiki);     
00017     }
00018     
00019     <span class="comment">// called after the test functions are executed    </span>
00020     <span class="comment">// this function is defined in PHPUnit_TestCase and overwritten </span>
00021     <span class="comment">// here    </span>
00022     function tearDown() {
00023         <span class="comment">// delete your instance</span>
00024         unset($this-&gt;processManager);
00025     }
00026   
00027     function testAddRremoveListProcess() {
00028         $vars = Array(  'name' =&gt; 'foo proc',
00029                                     'version' =&gt; '1.0',
00030                                     'isActive' =&gt; <span class="charliteral">'y'</span>,
00031                         'description' =&gt; '<span class="keyword">this</span> is foo'
00032                      );
00033         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00034         $cant = $procs['cant'];             
00035                 $pid = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00036                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00037                 $this-&gt;assertEquals($procs['cant'],$cant+1);                       
00038                 $this-&gt;processManager-&gt;remove_process($pid);            
00039                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');     
00040                 $this-&gt;assertEquals($procs['cant'],$cant);                       
00041     }
00042     
00043     function testList() {
00044         $vars = Array(  'name' =&gt; 'foo proc',
00045                                     'version' =&gt; '1.0',
00046                                     'isActive' =&gt; <span class="charliteral">'y'</span>,
00047                         'description' =&gt; '<span class="keyword">this</span> is foo'
00048                      );
00049         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00050         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'name_desc<span class="charliteral">','</span>');
00051         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'name_asc<span class="charliteral">','</span>');
00052         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'name_desc<span class="charliteral">','</span>a');
00053                 $pid = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00054                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00055         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00056         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'name_desc<span class="charliteral">','</span>');
00057         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'name_asc<span class="charliteral">','</span>');
00058         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'name_desc<span class="charliteral">','</span>a');
00059 
00060                 $this-&gt;processManager-&gt;remove_process($pid);            
00061     }
00062     
00063     function testGetProcess() {
00064         $vars = Array(  'name' =&gt; 'foo proc',
00065                                     'version' =&gt; '1.0',
00066                                     'isActive' =&gt; <span class="charliteral">'y'</span>,
00067                         'description' =&gt; '<span class="keyword">this</span> is fooproc'
00068                      );
00069                 $pid = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00070                 $proc = $this-&gt;processManager-&gt;get_process($pid);
00071                 $this-&gt;assertEquals($proc['name'],'foo proc');                       
00072                 $this-&gt;assertEquals($proc['description'],'<span class="keyword">this</span> is fooproc');                       
00073             $this-&gt;assertEquals($proc['isActive'],<span class="charliteral">'y'</span>);                       
00074             $this-&gt;assertEquals($proc['version'],'1.0');                       
00075                 $this-&gt;processManager-&gt;remove_process($pid);            
00076     }
00077     
00078     function testAddUpdateGet() {
00079         $vars = Array(  'name' =&gt; 'foo proc',
00080                                     'version' =&gt; '1.0',
00081                                     'isActive' =&gt; <span class="charliteral">'y'</span>,
00082                         'description' =&gt; '<span class="keyword">this</span> is fooproc'
00083                      );
00084                 $pid = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00085             $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00086         $cant1 = $procs['cant'];             
00087         $vars = Array(  'name' =&gt; 'foo proc2',
00088                                     'version' =&gt; '1.1',
00089                                     'isActive' =&gt; <span class="charliteral">'n'</span>,
00090                         'description' =&gt; '<span class="keyword">this</span> is fooproc2'
00091                      );
00092                 $pid = $this-&gt;processManager-&gt;replace_process($pid,$vars);                      
00093                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00094                 $this-&gt;assertEquals($cant1,$procs['cant']);                             
00095                 $proc = $this-&gt;processManager-&gt;get_process($pid);
00096                 $this-&gt;assertEquals($proc['name'],'foo proc2');                       
00097                 $this-&gt;assertEquals($proc['version'],'1.1');                       
00098                 $this-&gt;assertEquals($proc['isActive'],<span class="charliteral">'n'</span>);
00099                 $this-&gt;assertEquals($proc['description'],'<span class="keyword">this</span> is fooproc2');                       
00100                 $this-&gt;processManager-&gt;remove_process($pid);                    
00101     }
00102     
00103     function testListByActive() {
00104         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00105         $cant1 = $procs['cant'];             
00106         $vars = Array(  'name' =&gt; 'foo proc',
00107                                     'version' =&gt; '1.0',
00108                                     'isActive' =&gt; <span class="charliteral">'n'</span>,
00109                         'description' =&gt; '<span class="keyword">this</span> is fooproc'
00110                      );
00111                 $pid1 = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00112                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00113         $cant2 = $procs['cant'];             
00114             $this-&gt;assertEquals($cant1+1,$cant2);
00115             $vars = Array(  'name' =&gt; 'foo proc',
00116                                     'version' =&gt; '1.0',
00117                                     'isActive' =&gt; <span class="charliteral">'y'</span>,
00118                         'description' =&gt; '<span class="keyword">this</span> is fooproc'
00119                      );
00120                 $pid2 = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00121                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00122         $cant3 = $procs['cant'];             
00123             $this-&gt;assertEquals($cant3,$cant2);
00124                 $this-&gt;processManager-&gt;remove_process($pid1);        
00125                 $this-&gt;processManager-&gt;remove_process($pid2); 
00126     }
00127     
00128     function testActivateDeactivate() {
00129         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00130         $cant1 = $procs['cant'];             
00131             $vars = Array(  'name' =&gt; 'foo proc',
00132                                     'version' =&gt; '1.0',
00133                                     'isActive' =&gt; <span class="charliteral">'n'</span>,
00134                         'description' =&gt; '<span class="keyword">this</span> is fooproc'
00135                      );
00136                 $pid1 = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00137                 $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00138         $cant2 = $procs['cant'];             
00139             $this-&gt;assertEquals($cant1+1,$cant2);
00140         $this-&gt;processManager-&gt;activate_process($pid1);
00141         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00142         $cant3 = $procs['cant'];             
00143         $this-&gt;assertEquals($cant1,$cant3);
00144         $this-&gt;processManager-&gt;deactivate_process($pid1);
00145         $procs = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00146         $cant3 = $procs['cant'];           
00147         $this-&gt;assertEquals($cant1+1,$cant3);  
00148                 $this-&gt;processManager-&gt;remove_process($pid1);            
00149     }
00150     
00151     function testVersioningNumbers() {
00152         $version='12.19';
00153         $new1 = $this-&gt;processManager-&gt;_new_version($version,<span class="keyword">false</span>);
00154                 $this-&gt;assertEquals($new1,'13.19');     
00155         $new2 = $this-&gt;processManager-&gt;_new_version($version,<span class="keyword">true</span>);
00156         $this-&gt;assertEquals($new2,'12.20');
00157     }
00158     
00159     function testNewProcessVersion() {
00160         <span class="comment">//new_process_version($pId, $minor=true)</span>
00161         $vars = Array(  'name' =&gt; 'foo proc',
00162                                     'version' =&gt; '1.0',
00163                                     'isActive' =&gt; <span class="charliteral">'y'</span>,
00164                         'description' =&gt; '<span class="keyword">this</span> is fooproc'
00165                      );
00166                 $pid1 = $this-&gt;processManager-&gt;replace_process(0,$vars);        
00167                 $procs2 = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00168                 $procs3 = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00169                 $pid2 = $this-&gt;processManager-&gt;new_process_version($pid1);
00170                 $this-&gt;assertFalse($pid1 == $pid2);     
00171                 $nproc = $this-&gt;processManager-&gt;get_process($pid2);
00172                 $this-&gt;assertEquals($nproc['version'],'1.1');   
00173                 $procs2b = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>');
00174                 $procs3b = $this-&gt;processManager-&gt;list_processes(0,-1,'pId_desc<span class="charliteral">','</span>',<span class="stringliteral">"isActive='n'"</span>);
00175                 $this-&gt;assertEquals($procs2['cant']+1,$procs2b['cant']);        
00176                 $this-&gt;assertEquals($procs3['cant']+1,$procs3b['cant']);        
00177                 $this-&gt;processManager-&gt;remove_process($pid1);  
00178                 $this-&gt;processManager-&gt;remove_process($pid2);                                   
00179     }
00180             
00181   }
00182 
00183 include_once('lib/Galaxia/src/<a class="code" href="classProcessManager.html">ProcessManager</a>/<a class="code" href="classProcessManager.html">ProcessManager</a>.php');  
00184 $suite = <span class="keyword">new</span> PHPUnit_TestSuite(<span class="stringliteral">"ProcessManagerTest"</span>);
00185 $result = PHPUnit::run($suite);
00186 echo $result -&gt; toHTML();
00187 ?&gt;
</pre></div><hr><address style="align: right;"><small>Generated on Mon Apr 14 11:51:59 2003 for Galaxia by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc3 </small></address>
</body>
</html>
